{
  "model": "claude-sonnet-4-5-20250929",
  "max_tokens": 20000,
  "temperature": 1,
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": "You are tasked with analyzing website user testing feedback to provide comprehensive, structured insights for website improvement. \nYou will process tester responses and generate a report with FOUR sections that strictly follows the contract below.\n\nInputs:\n<tester_responses>\n{{TESTER_RESPONSES}}\n</tester_responses>\n\n<survey_questions>\n{{SURVEY_QUESTIONS}}\n</survey_questions>\n\n<tester_id_mapping>  <!-- Optional mapping if available -->\n{{TESTER_ID_MAPPING_JSON}}\n</tester_id_mapping>\n\n---\n# AI Contract (MUST FOLLOW EXACTLY)\n\nReturn one JSON object with the following exact top-level keys:\n\n1) \"section_1_sentiment_analysis\"\n  - \"summary_paragraph\" (string, 80–160 words): A concise paragraph summarizing overall sentiment and key themes across all feedback.\n  - \"sentiment_breakdown\" (object): { \"positive_pct\": number 0–100, \"neutral_pct\": number 0–100, \"negative_pct\": number 0–100 }\n  - The \"top_terms\" key must be explicitly omitted from this section as per user request.\n  - Keep this section focused and non-redundant.\n\n2) \"section_2_scoring_and_pain_points\"\n  - \"areas\" (object with exactly four keys): \"Navigation\", \"Layout clarity\", \"Functionality\", \"Visual appeal\".\n  - For each area return an object: \n    {\n      \"score_1_to_5\": integer,\n      \"stars\": \"★☆☆☆☆\"..\"★★★★★\",\n      \"comment\": string (1–2 sentences explaining key user troubles or wins with specific evidence/quotes if available)\n    }\n  - Scores must be integers 1–5 only. (Estimate based on all data if no direct question exists for the area).\n\n3) \"section_3_actionable_steps_with_ranking\"\n  - \"high_priority\" (array, exactly 3 items): each item = { \"action\": string, \"rationale\": string (1–2 sentences), \"impact\": \"high\", \"effort\": \"low\"|\"medium\"|\"high\" }\n    *High priority means immediate action required.*\n  - \"medium_priority\" (array, exactly 3 items): format identical to above, impact typically \"medium\" and timeline 1–2 months.\n  - \"low_priority\" (array, exactly 2 items): future improvements, format identical.\n  - Actions must be specific and directly traceable to evidence in feedback; avoid generic advice.\n\n4) \"section_4_review_by_questions\"\n  - Return an array where each element corresponds to one survey question in the order asked.\n  - Each element is an object:\n    {\n      \"question_number\": integer,\n      \"question_text\": string,\n      \"ai_summary\": string (2–4 sentences summarizing all submissions for that question),\n      \"responses\": [ \n          { \"tester_id\": string, \"answer\": string }  // include every person’s answer as-is (lightly cleaned), one object per tester\n      ]\n    }\n  - If some testers skipped a question, include them with answer: \"\".\n\nGeneral Rules\n- Use only the information contained in <tester_responses>; do not invent details.\n- Quote short snippets when referencing evidence (≤ 12 words per quote).\n- Be concise and avoid repeating the same point across sections.\n- Ensure valid JSON (double-quoted keys/strings, no trailing commas).\n- If there is too little data to support a metric, still return the required key with a best-effort estimate and add \"(limited data)\" in the comment/rationale.\n\n---\nReturn only the JSON object—no prose, no markdown."
        }
      ]
    }
  ]
}